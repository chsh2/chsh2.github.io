<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Rigging Utilities#Although Blender can automatically generate weights rigging Grease Pencil strokes to an armature, the result often requires heavy manual adjustment. NijiGPen provides with several alternative methods generating bone weights.
The rigging-related operations will show up in a panel when the current mode is Weight Paint.
Transfer Weights from Meshes#The Weight From Meshes button is a tool transferring the weights from rigged mesh objects to the current Grease Pencil object.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Rigging Utilities" />
<meta property="og:description" content="Rigging Utilities#Although Blender can automatically generate weights rigging Grease Pencil strokes to an armature, the result often requires heavy manual adjustment. NijiGPen provides with several alternative methods generating bone weights.
The rigging-related operations will show up in a panel when the current mode is Weight Paint.
Transfer Weights from Meshes#The Weight From Meshes button is a tool transferring the weights from rigged mesh objects to the current Grease Pencil object." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chsh2.github.io/nijigp/docs/functionality/animation/rigging/" /><meta property="article:section" content="docs" />


<title>Rigging Utilities | NijiGPen Documentation</title>
<link rel="manifest" href="/nijigp/manifest.json">
<link rel="icon" href="/nijigp/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/nijigp/book.min.d984b6ffea0097d4b26e4daa87fa4167406fdf2cd1fda9eeddadf6f3c5823974.css" integrity="sha256-2YS2/&#43;oAl9Sybk2qh/pBZ0Bv3yzR/anu3a3288WCOXQ=" crossorigin="anonymous">
  <script defer src="/nijigp/flexsearch.min.js"></script>
  <script defer src="/nijigp/en.search.min.bf030bb235dffb89c15b24e00949f8a494d622bdde1a8d3d0b33918b831fd48f.js" integrity="sha256-vwMLsjXf&#43;4nBWyTgCUn4pJTWIr3eGo09CzORi4Mf1I8=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/nijigp/"><span>NijiGPen Documentation</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Get Started</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/get_started/installation/" class="">Installation</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/get_started/installation/dependency/" class="">Python Packages</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/get_started/basic_usage/" class="">Basic Usage</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Functionality</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <span>- Polygons -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/bool/" class="">Boolean</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/offset/" class="">Offset</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/sweep/" class="">Sweep</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/holdout/" class="">Hole Holdout</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Lines -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/line/fit/" class="">Sketch Cleanup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/line/tuning/" class="">Stroke Tuning</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/line/smart_fill/" class="">Smart Fill</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Meshes -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/mesh/generation/" class="">Mesh Generation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/mesh/management/" class="">Mesh Management</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Animations -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/animation/frame_animation/" class="">Frame Animations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/animation/rigging/" class="active">Rigging Utilities</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Import/Export -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/brushes/" class="">Brush Import</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/clipboard/" class="">Clipboard Utilities</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/vectorizing_images/" class="">Vectorizing Images</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/psd_render/" class="">PSD Render</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Tips</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/tips/scene_setup/" class="">Scene Setup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/tips/limitations/" class="">Limitations</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Developer Notes (TODO)</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/nijigp/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Rigging Utilities</strong>

  <label for="toc-control">
    
    <img src="/nijigp/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#transfer-weights-from-meshes">Transfer Weights from Meshes</a>
      <ul>
        <li><a href="#source-objects">Source Objects</a></li>
      </ul>
    </li>
    <li><a href="#use-hints-to-generate-pins">Use Hints to Generate Pins</a>
      <ul>
        <li><a href="#hint-strokes">Hint Strokes</a></li>
        <li><a href="#bone-styles">Bone Styles</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="rigging-utilities">
  Rigging Utilities
  <a class="anchor" href="#rigging-utilities">#</a>
</h1>
<p>Although Blender can automatically <a href="https://docs.blender.org/manual/en/latest/grease_pencil/modes/weight_paint/weights_menu.html">generate weights</a> rigging Grease Pencil strokes to an armature, the result often requires heavy manual adjustment. NijiGPen provides with several alternative methods generating bone weights.</p>
<p><img src="../panel.png" alt="" /></p>
<p>The rigging-related operations will show up in a panel when the current mode is <code>Weight Paint</code>.</p>
<h2 id="transfer-weights-from-meshes">
  Transfer Weights from Meshes
  <a class="anchor" href="#transfer-weights-from-meshes">#</a>
</h2>
<p><img src="../transfer.png" alt="" /></p>
<p>The <code>Weight From Meshes</code> button is a tool transferring the weights from rigged mesh objects to the current Grease Pencil object.</p>
<p>The operator requires an <strong>armature</strong> and one or more source <strong>mesh objects</strong> as the input. It sets the weights of the armature bones to stroke points according to the nearest vertex from the source mesh objects.</p>
<p>If the source objects are not rigged, the operator can rig them first using the <a href="https://docs.blender.org/manual/en/latest/animation/armatures/skinning/parenting.html#with-automatic-weights">With Automatic Weights</a> parenting tool, and then perform the transfer, controlled by the option <code>Use Existing Weights</code>.</p>
<h3 id="source-objects">
  Source Objects
  <a class="anchor" href="#source-objects">#</a>
</h3>
<p>For 2D animations, one recommended way is to draw a silhouette of the target that you want to animate, and convert it to a mesh object using this add-on&rsquo;s mesh generation operations. The silhouette does not need to be very precise, but in general a better-drawn silhouette may lead to a better rigging result.</p>
<p>Besides manually drawing it, the following functions may be used to generate a silhouette:</p>
<ul>
<li>Blender&rsquo;s <a href="https://docs.blender.org/manual/en/latest/grease_pencil/modes/draw/tools/fill.html">Fill</a> tool with the <strong>inverted</strong> direction.</li>
<li><a href="../../line/smart_fill">Smart Fill</a> tool of this add-on.</li>
</ul>
<p>Besides using the generated mesh, you can also assign an arbitrary mesh object, or all mesh objects from a collection as the source. For example, this option may be useful when drawing strokes on the surface of a 3D object to keep their bone animation consistent. In that case, please make sure to change to mapping option to <code>3D Nearest Vertex</code>.</p>
<h2 id="use-hints-to-generate-pins">
  Use Hints to Generate Pins
  <a class="anchor" href="#use-hints-to-generate-pins">#</a>
</h2>
<p><img src="../pins.png" alt="" /></p>
<p>The <code>Pins from Hints</code> button is another rigging tool that can be used for rubber hose animations of limbs. It does not require an existing armature as the input. Instead, by drawing some hint strokes, the operator will generate bones at the same position, and then rig the Grease Pencil using these bones by setting weights to nearby points.</p>
<blockquote class="book-hint info">
  It is recommended to add a <code>Smooth</code> modifier after the <code>Armature</code> modifier if the point movement looks unnatural.
</blockquote>

<h3 id="hint-strokes">
  Hint Strokes
  <a class="anchor" href="#hint-strokes">#</a>
</h3>
<p>The hint strokes should be drawn in a separate layer. Each stroke&rsquo;s start and end position determine the placement of a bone. All other point/stroke attributes have no impact on the result.</p>
<p>Each hint stroke should be drawn at the middle of a limb and perpendicular to it. It should intersect with the limb&rsquo;s outlines at both ends.</p>
<h3 id="bone-styles">
  Bone Styles
  <a class="anchor" href="#bone-styles">#</a>
</h3>
<p>There are several options to transform the generated bones:</p>
<ul>
<li><code>Bone Style</code>: This determines whether the bone should start from the hint&rsquo;s center (<em>Half</em>) or start point (<em>Full</em>).</li>
<li><code>Bone Rotation</code>: Setting it to <code>+90</code> or <code>-90</code> degrees can make the bones parallel to the limb.</li>
<li><code>Set Bone Parent</code>: This option sets the parent relationship between bones according to the drawn sequence of hints and the relative position. Please notice that the result usually need manual adjustment.</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#transfer-weights-from-meshes">Transfer Weights from Meshes</a>
      <ul>
        <li><a href="#source-objects">Source Objects</a></li>
      </ul>
    </li>
    <li><a href="#use-hints-to-generate-pins">Use Hints to Generate Pins</a>
      <ul>
        <li><a href="#hint-strokes">Hint Strokes</a></li>
        <li><a href="#bone-styles">Bone Styles</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












