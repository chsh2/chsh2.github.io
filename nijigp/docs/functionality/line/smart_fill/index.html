<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Smart Fill#Smart Fill is an operator in the Draw mode. It fills an entire line art layer based on some color hints marked by the user. Compared with the Blender&#39;s default Fill tool, it has the following advantages:
It handles the gaps in the line art automatically. It is less likely to leave seams near the contour, or be intersected. Although the algorithms are different, the concept of this operation is similar to the Colorize Mask tool in Krita.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Smart Fill" />
<meta property="og:description" content="Smart Fill#Smart Fill is an operator in the Draw mode. It fills an entire line art layer based on some color hints marked by the user. Compared with the Blender&#39;s default Fill tool, it has the following advantages:
It handles the gaps in the line art automatically. It is less likely to leave seams near the contour, or be intersected. Although the algorithms are different, the concept of this operation is similar to the Colorize Mask tool in Krita." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chsh2.github.io/nijigp/docs/functionality/line/smart_fill/" /><meta property="article:section" content="docs" />


<title>Smart Fill | NijiGPen Documentation</title>
<link rel="manifest" href="/nijigp/manifest.json">
<link rel="icon" href="/nijigp/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/nijigp/book.min.3bc88adb2893c54b24fa8617cb6dc6ca846aa5522c5275f3279db80d776e8d55.css" integrity="sha256-O8iK2yiTxUsk&#43;oYXy23GyoRqpVIsUnXzJ524DXdujVU=" crossorigin="anonymous">
  <script defer src="/nijigp/flexsearch.min.js"></script>
  <script defer src="/nijigp/en.search.min.44b0dbb8baa42f7169af727fcdedaceee35f825ed46b363240516cdb876dd4ee.js" integrity="sha256-RLDbuLqkL3Fpr3J/ze2s7uNfgl7UazYyQFFs24dt1O4=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/nijigp/"><span>NijiGPen Documentation</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/nijigp/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </label>

    <ul>
      
      <li>
        <a href="https://chsh2.github.io/nijigp/zh/">
          中文
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Get Started</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/get_started/installation/" class="">Installation</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/get_started/installation/dependency/" class="">Python Packages</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/get_started/basic_usage/" class="">Basic Usage</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Functionality</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <span>- Polygons -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/bool/" class="">Boolean</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/offset/" class="">Offset</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/sweep/" class="">Sweep</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/holdout/" class="">Hole Holdout</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/hatch/" class="">Hatch Fill</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/polygon/shading/" class="">Shading</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Lines -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/line/fit/" class="">Sketch Cleanup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/line/tuning/" class="">Stroke Tuning</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/line/smart_fill/" class="active">Smart Fill</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Meshes -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/mesh/generation/" class="">Mesh Generation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/mesh/management/" class="">Mesh Management</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Animations -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/animation/frame_animation/" class="">Frame Animations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/animation/rigging/" class="">Rigging Utilities</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>- Import/Export -</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/brushes/" class="">Brush Import</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/colors/" class="">Palette Import</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/svg/" class="">SVG Import</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/vectorizing_images/" class="">Image Import</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/functionality/io/psd_render/" class="">PSD Render</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Tips</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/tips/scene_setup/" class="">Scene Setup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/tips/limitations/" class="">Limitations</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Developer Notes</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/developer_notes/algorithms/" class="">Algorithm Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/nijigp/docs/developer_notes/data_structures/" class="">Data Structures</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href=""  target="_blank" rel="noopener">
        ---
      </a>
  </li>
  
  <li>
    <a href="https://github.com/chsh2/nijiGPen/releases/download/v0.12.0/NijiGPen_Manual.epub"  target="_blank" rel="noopener">
        [EPUB Manual]
      </a>
  </li>
  
  <li>
    <a href="https://github.com/chsh2/nijiGPen/releases/download/v0.12.0/NijiGPen_Manual.pdf"  target="_blank" rel="noopener">
        [PDF Manual]
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/nijigp/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Smart Fill</strong>

  <label for="toc-control">
    
    <img src="/nijigp/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#from-sidebar-panel">From Sidebar Panel</a>
      <ul>
        <li><a href="#inputoutput-layers">Input/Output Layers</a></li>
        <li><a href="#hint-strokes">Hint Strokes</a></li>
        <li><a href="#output-materials">Output Materials</a></li>
      </ul>
    </li>
    <li><a href="#from-toolbar">From Toolbar</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="smart-fill">
  Smart Fill
  <a class="anchor" href="#smart-fill">#</a>
</h1>
<p><code>Smart Fill</code> is an operator in the <code>Draw</code> mode. It fills an entire line art layer based on some color hints marked by the user. Compared with the Blender's default <code>Fill</code> tool, it has the following advantages:</p>
<ul>
<li>It handles the gaps in the line art automatically.</li>
<li>It is less likely to leave seams near the contour, or be intersected.</li>
</ul>
<p><img src="../smart_fill.png" alt="Smart Fill" /></p>
<p>Although the algorithms are different, the concept of this operation is similar to the <a href="https://docs.krita.org/en/reference_manual/tools/colorize_mask.html">Colorize Mask</a> tool in Krita.</p>
<h2 id="from-sidebar-panel">
  From Sidebar Panel
  <a class="anchor" href="#from-sidebar-panel">#</a>
</h2>
<p>Smart Fill can be accessed from the button in the sidebar panel. This method requires the user to draw color hints as strokes.</p>
<h3 id="inputoutput-layers">
  Input/Output Layers
  <a class="anchor" href="#inputoutput-layers">#</a>
</h3>
<p>The operation takes two input layers, one containing the line art (<em>Line Layer</em>), and the other containing the color hint strokes (<em>Hint Layer</em>). They must be distinct layers.</p>
<p>The operation then generates new strokes in an output layer (<em>Fill Layer</em>). It is possible, but not recommended to use the same layer as <em>Fill</em> and <em>Hint</em>, since it will be difficult to distinguish the output strokes from the input ones. To overcome it, there is an option specifying to use only <a href="https://docs.blender.org/manual/en/latest/grease_pencil/modes/draw/tools/fill.html#boundary-strokes">Boundary Strokes</a> as hints.</p>
<h3 id="hint-strokes">
  Hint Strokes
  <a class="anchor" href="#hint-strokes">#</a>
</h3>
<p>Points in the hint strokes will force the nearby areas be filled with the same color. The color of a hint point is determined in the following way:</p>
<ul>
<li>If the stroke/point has a vertex color, use it as hint. Otherwise, use its material color.</li>
<li>If the stroke has its fill visible, use the fill color as hint. Otherwise, use the line color.</li>
</ul>
<p>Only the position and color of the hint strokes have an impact. Other point/stroke attributes, including the line thickness and strength will not affect the result.</p>
<blockquote class="book-hint info">
  You can use fill materials for the hint strokes. But only its contour points will be taken into account. The inner part has no effect.
</blockquote>

<h3 id="output-materials">
  Output Materials
  <a class="anchor" href="#output-materials">#</a>
</h3>
<p>There are different ways to assign materials to the newly generated fill strokes:</p>
<ul>
<li>Use the same materials (and vertex colors if exist) as hint strokes.</li>
<li>Use an existing material. Generate vertex fill colors for each stroke.</li>
<li>For each color used as hints, generate a new material.</li>
</ul>
<p>If you tend to use existing materials, please make sure they are not line-only ones.</p>
<h2 id="from-toolbar">
  From Toolbar
  <a class="anchor" href="#from-toolbar">#</a>
</h2>
<div class="book-columns flex flex-wrap">

  <div class="flex-even markdown-inner">
    <p>Smart Fill can also be used as a tool in the <code>Draw</code> mode, as an alternative of Blender's native Fill tool. It allows the user to fill an area will mouse clicks:</p>
<ul>
<li><strong>Left Click</strong>: Specifies an area to fill.</li>
<li><strong>Right Click</strong>: Specifies an area not to fill.</li>
<li><strong>Enter</strong>: Confirms the current results and exits the tool.</li>
<li><strong>ESC</strong>: Cancels the operation and exits the tool.</li>
</ul>
<p>In addition, mouse middle and side buttons can be assigned to Confirm or Cancel in <code>Preferences</code>.</p>

  </div>

  <div class="flex-even markdown-inner">
    <img src="../smart_fill_tool.png" alt="" />
  </div>

</div>

<p>The tool generates fill strokes in the active layer. By default, it also analyzes the line art in the same layer, while a more common way is to specify another layer as the line art in the topbar's option.</p>
<p>Currently, the tool does not support multiframe fill. In order to fill multiple frames at the same time, please use the sidebar method with hint strokes.</p>
<blockquote class="book-hint info">
  Please notice that Smart Fill may react slowly when the line art contains a large number of points. In this case, it is recommended to save your file before using this tool.
</blockquote>

<hr>
<p>(The example image used in this page is <em>Portrait of Olga</em> by Pablo Picasso in 1920.)</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#from-sidebar-panel">From Sidebar Panel</a>
      <ul>
        <li><a href="#inputoutput-layers">Input/Output Layers</a></li>
        <li><a href="#hint-strokes">Hint Strokes</a></li>
        <li><a href="#output-materials">Output Materials</a></li>
      </ul>
    </li>
    <li><a href="#from-toolbar">From Toolbar</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












