[{"id":0,"href":"/docs/get_started/installation/","title":"Installation","section":"Get Started","content":"\rInstallation\r#\rDifferent from most Blender add-ons, NijiGPen relies heavily on third-party Python packages. It is recommended to read the Python Packages page for more details.\nRequirements\r#\rBlender 3.3 ~ 3.6 (Currently, the add-on focuses majorly on stable verions. It is not guaranteed that all functions can work well in alpha or beta verions of Blender.)\nInstallation Steps\r#\rDownload the archive file from the GitHub Release page. Please avoid downloading the source code ZIP directly, since it may contain untested changes.\nIn Blender, open [Edit]-\u0026gt;[Preferences]-\u0026gt;[Add-ons] and click the Install button to load the archive. Enable the installed add-on.\nCheck the dependency summary to decide which Python packages are needed. Install them in the Preferences panel. Internet connection is required. Upgrade\r#\rBlender Upgrade: After upgrading Blender to a new version, the Installation Step 3 (Dependency Management) should be executed again.\nAdd-on Upgrade: If you want to replace the installed add-on with a newer version, it is recommended to remove the old version and restart Blender before installing the new version.\nRemoval\r#\rRemoving the add-on will not automatically remove the Python packages it installed. Please manually remove them using the buttons in the Preferences panel before removing the add-on itself.\n"},{"id":1,"href":"/docs/get_started/installation/dependency/","title":"Python Packages","section":"Installation","content":"\rPython Packages\r#\rNijiGPen\u0026rsquo;s functionality relies on some third-party Python packages, which have to be separately downloaded and installed. If you have no experience with Blender add-ons that have similar requirements, it is strongly suggested to read this page before using the add-on.\nDependency Summary\r#\rThe table below lists the packages required for each type of operation. Lacking a package will not affect operations that do not require it. For example, if you install this add-on just to import brushes and render PSD files, then you do not need to take any actions mentioned in this page.\nFunction PyClipper Scipy \u0026amp; SkImage Triangle Polygon (Bool, Offset \u0026amp; Sweep) Yes Line Fitting Yes Line Shaping (Pinch, Taper) Smart Fill Yes Yes Mesh Generation [See Below] Yes Optional Optional Rigging Using Mesh Rigging Using Hints Yes Brush Import Line Art Import Yes Color Image Import Yes Yes SVG \u0026amp; Palette Paste PSD Render About Mesh Generation\nOnly pyclipper is a mandatory requirement. However, the other packages are optional to enable some enhancements of the Interpolation operator:\nscipy enables an advanced solver to calculate vertex depth. triangle enables an option to improve mesh quality, i.e., more uniformly distributed vertices. Impact of Operating Systems\r#\rThe add-on is available and has been tested in Windows, Linux and MacOS. However, there may be some specific issues in each OS:\nWindows\rDepending on the way Blender is installed, some additional attentions may be needed besides the normal package installation process.\nPortable or Steam: No additional action required. Official Installer: If Blender is installed in a system folder (e.g., C:\\Program Files\\Blender Foundation\\), it is recommended to run Blender as administrator to ensure the dependencies installed correctly. Microsoft Store: A custom package path is required to install packages. Normally, this will be handled automatically. Please refer to a later section for more information. MacOS\rThe triangle package is not yet available for Apple silicon (M1/M2) devices. Please skip installing this package. It has only minor negative effects.\rPackage Installation\r#\rTo install Python packages, the most straightforward way is the dependency manager in the add-on setting of the Preferences panel.\nClick the \u0026ldquo;Check\u0026rdquo; button to detect which packages have been installed, and click \u0026ldquo;Install\u0026rdquo; button for those missing (Internet connection is required). The logs during the installation will be printed in the panel, which will also indicate if the installation is successful.\nThe \u0026ldquo;Remove\u0026rdquo; button works in the similar way to uninstall packages. However, it requires Blender to be restarted to apply the changes.\nIf the installation fails, the reason may be shown in the logs. You may also consider reading the following sections about the alternative methods and the FAQ.\nAlternative Method 1: Custom Package Path\r#\rNormally, packages are installed in Blender\u0026rsquo;s directory. However, in the Custom Package Path option, an additional path can be assigned for Blender to find and load the packages from. This option may be useful in the following scenarios:\nYou have multiple instances of Blender and/or Python installed, and do not want to download the packages repeatedly. You do not have the write access to the Blender directory (e.g., when Blender is installed through Microsoft Store). In the second case, the add-on will try to find this path automatically during the package installation. If that does not succeed, you may consider checking the following paths, which are some common places that packages may be installed to:\n\u0026#34;[Your Blender Directory]/3.x/python/lib/site-packages\u0026#34; (Windows) \u0026#34;%USERPROFILE%\\AppData\\Roaming\\Python\\Python310\\site-packages\u0026#34; (Linux) \u0026#34;~/.local/lib/python3.10/site-packages\u0026#34; Alternative Method 2: Manual Installation\r#\rThe Python packages are installed and managed by pip. For Python users knowing how pip works, the required packages can also be installed manually using the commmand line or terminal:\nEnter Blender\u0026rsquo;s directory in the command line. An official manual is available. Enable the pip module: ./python -m ensurepip --upgrade Install packages: ./python -m pip install pyclipper triangle scikit-image You may consider these options when using pip: --no-cache-dir, --force-reinstall, --only-binary.\rFAQ\r#\rThe package installation succeeded, but the package status is still \u0026ldquo;Not Installed\u0026rdquo;.\rThis usually happens when you do not have the write access of the Blender directory, and the packages are automatically installed somewhere else. The path is usually shown in the logs. Please check if there are some lines containing a path ending with site-packages. If such a path can be found in the logs, refer to the Custom Package Path method and enter this path.\rBlender stops responding after hitting the Install button.\rIt is common that the download and installation may take some time. However, if Blender has no reponse for a long time, there might be network issues. Please make sure you have the Internet connection, and maybe use VPN if necessary.\nIt is possible that the display of logs can be lagged, until the operation finishes. To see the logs in real time, the same messages will also be shown in [Window] - [Toggle System Console] and without lags.\n"},{"id":2,"href":"/docs/tips/scene_setup/","title":"Scene Setup","section":"Tips","content":"\rScene Setup\r#\rBlender comes with a template start file \u0026ldquo;2D Animation\u0026rdquo; that is convenient for painting. However, there are also some tricky parts in setting up the scene, especially when we put Grease Pencil and 3D objects in the same scene, including the meshes generated by this add-on. Here are some tips written in the form of FAQ.\nWhy cannot I see any shading effect when I generate meshes from Grease Pencil?\rThe default 2D Animation scene does not have any light sources. So we have to add some light objects to the scene ourselves.\nIn addition, please change the Viewport Shading to Render Preview mode and make sure that the scene lights are enabled.\nIf you do not want to set light sources, you can try the MatCap materials when generating meshes, which have the lighting information baked in and do not need scene lights.\nWhy is the lighting on 2D and 3D objects not consistent?\rThe environment background colors for 2D and 3D objects are not the same. In the [Scene]\u0026gt;[World] panel:\nthe lighting of 3D objects is determined by Surface and Volume tabs, but the lighting of Grease Pencil is determined by the Viewport Display tab. Please make sure that these two color values are the same if you want to make the lighting more consistent across all objects.\nWhy is the color drawn on the canvas slightly different from my material setting?\rYou may notice that the color displayed in the viewport is slightly different from the color you selected in the Brush or Material settings. This can cause some problems, such as getting the wrong color when using the Eyedropper tool.\nThis happens because the default background color is not actually white, although it looks very similar. The exact color is #F9F9F9.\nTo keep the color as it is, you can either set the viewport background color to pure white or uncheck the \u0026ldquo;Use Lights\u0026rdquo; option of the Grease layer.\nWhy does Grease Pencil obstruct all 3D objects regardless of depth, unlike what I see in the preview?\rThere are two options determining whether Grease Pencil will be rendered above all 3D objects:\nIn the [Scene]\u0026gt;[ViewLayer] panel, when Z pass is disabled (as by default), Grease Pencil objects will be rendered above all 3D objects. (But in the preview, it appears at the correct location.) In the [Object] properties panel, when \u0026ldquo;In Front\u0026rdquo; is checked in the Viewport Display tab, this Grease Pencil object is both rendered and previewed at the top. "},{"id":3,"href":"/docs/get_started/basic_usage/","title":"Basic Usage","section":"Get Started","content":"\rBasic Usage\r#\rUser Interface\r#\rNijiGPen creates new user interfaces to trigger its functions in the following places of Blender.\nSidebar Panels\r#\rA tab named NijiGP will appear in the sidebar of the 3D Viewport, if the active object is Grease Pencil and the mode is Draw, Edit or Weight Paint. This is the major way of calling NijiGPen\u0026rsquo;s functions.\nNijiGPen operators are categorized in several panels. Depending on the current mode, different panels or operators may appear.\nTools\r#\rNijiGPen adds several new tools in the Toolbar of Grease Pencil Edit mode. The tool icons have a \u0026ldquo;2D\u0026rdquo; mark on them.\nThese tools have the same effect as the corresponding operators in the sidebar panel. However, they allow you to tune the parameters with mouse dragging instead of typing numbers.\nShortcut Buttons (Optional)\r#\rNijiGPen also adds some buttons at the bottom of the 3D Viewport window. They are shortcuts of the following functions:\nUndo/redo Tilt the canvas Arrange selected strokes forward/backward The purpose of these shortcut buttons is to enhance the user experience on touchscreens (e.g., Microsoft Surface), since painting software on tablets usually have such buttons.\nIf you do not need them or find them conflicting with other add-ons, you can change their position or shut them off in the setting of Preferences panel.\n2D Working Plane\r#\rMost of the add-on operators work in a 2D plane. If you are working with Blender\u0026rsquo;s 2D Animation template (using X-Z plane by default), there would be no problems. However, when working in the 3D space (e.g., painting on the surface of an object), the way of determining the 2D working plane should be paid attention to.\nIn the default mode (\u0026ldquo;Auto\u0026rdquo;), the add-on first estimates the coordinates of all input stroke points to determine the vectors of two most important dimensions. Then it uses the current view to determine the front/back and up/down directions. Please avoid selecting strokes belonging to more than one 2D plane as the input. In that case, the estimation can be wrong. (A warning message will show up when it happens.) There are also other modes available, including using the current view, or using an orthogonal plane (X-Y, X-Z or Y-Z). It can be set in the Global Setting panel. Applying a rotation in a Grease Pencil layer\u0026rsquo;s attribute may disturb the detection of the working plane. If you want to use layer rotation with NijiGPen, please make sure to check the Use Transform of Active Layer option and process strokes from a single layer per operation.\r"},{"id":4,"href":"/docs/get_started/","title":"Get Started","section":"Docs","content":""},{"id":5,"href":"/docs/tips/limitations/","title":"Limitations","section":"Tips","content":"\rLimitations\r#\rThe add-on has a number of limitations in different aspects, including:\nUnfinished features of the add-on itself, which may be improved in future releases. Limitations due to Blender\u0026rsquo;s own design, which may lead to different behaviors from common graphics software. Shape of a Stroke\r#\rThe performance of the add-on may deteriorate with input strokes of certain shapes:\nPlease avoid using self-overlapping strokes. Unlike common vector formats such as SVG, Blender does not define a fill rule and the rendering of the overlapping parts cannot be guaranteed. Most operators ignore the overlapping parts automatically, but sometimes it also causes crashes. To eliminate these parts, you can use the Offset operator with a value of zero. It is also recommended not to have too few points or unevenly distributed points along the stroke, as this can lead to poor quality mesh generation or line cleanup results. The Resample button in the add-on panel can be used to quickly redistribute the stroke points. Holes\r#\rBoth this add-on and Blender itself have limitations supporting fill shapes will holes inside.\nBlender does not allow holes in a stroke, but some add-on operators like Boolean, Offset and SVG Paste can result in holes. In such cases, the corresponding geometry will be created, but will not be transparent. To display holes in Grease Pencil, Blender provides with a Holdout property in its material setting. The add-on also has a Hole Holdout operator to automatically set this property for shapes inside other shapes. In addition, some operators of the add-on have special behaviors when the input strokes have the holdout property. The mesh generation operator (currently only for the interpolation method) can turn these strokes into real holes in the mesh. The Offset and Sweep operators have the option to inverse the operation direction for these strokes. Vertex Groups\r#\rAfter some operators, including Boolean, Offset, and Line Cleanup, the weights of vertex groups are not preserved. If you need them for modifiers or rigging (including the rigging functions of this add-on), it is recommended to assign weights after using these operators. Adobe File Format Compatibility\r#\rDespite their popularity, Adobe file formats such as ABR and PSD are not designed for interchange. In addition, these formats are mostly used for raster painting and may work differently than Grease Pencil. As a result, only a limited subset of features is supported.\nFor PSD rendering, the following restrictions apply:\nLayer masks are not supported, because Photoshop has different mechanisms for representing masks. Z-ordering in 3D space may not be preserved in the rendered image. Compression algorithms are not implemented yet. Rendered file size may be large. Frame animations have not been supported yet. For ABR brush import, the following restrictions apply:\nOnly image textures can be extracted from the brush file. Other information like brush parameters cannot be parsed. It may take a long time to parse high resolution (e.g. 2500px) brushes due to the uncompression process. (All emojis designed by OpenMoji – the open-source emoji and icon project. License: CC BY-SA 4.0)\n"},{"id":6,"href":"/docs/functionality/","title":"Functionality (TODO)","section":"Docs","content":""},{"id":7,"href":"/docs/tips/","title":"Tips","section":"Docs","content":""},{"id":8,"href":"/docs/developer_notes/","title":"Developer Notes (TODO)","section":"Docs","content":""},{"id":9,"href":"/docs/","title":"Docs","section":"Introduction","content":""}]