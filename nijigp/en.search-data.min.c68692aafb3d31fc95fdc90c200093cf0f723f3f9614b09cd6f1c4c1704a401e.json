[{"id":0,"href":"/nijigp/docs/functionality/polygon/","title":"- Polygons -","section":"Functionality","content":""},{"id":1,"href":"/nijigp/docs/functionality/polygon/bool/","title":"Boolean","section":"- Polygons -","content":"\rBoolean\r#\rNijiGPen provides following 2D boolean operations on the closed paths of two or more strokes:\nUnion (Sum, OR) Difference (Subtract, NOT) Intersection (AND) Exclusive (XOR) These functions are realized by calling the Clipper library. Please check the link for more details.\nEdit Mode Operators\r#\rThere are multiple buttons in the Edit mode panel, which are shortcuts of the same operator. This operator takes the paths of selected strokes as the input, and generate new strokes which are results of the boolean operation. You can choose to keep the input strokes or delete them.\nIt is possible, but not recommended to select strokes from multiple layers, since it is not intuitive to judge in which layer the output strokes should be generated and how they should be arranged.\rStroke Attributes\r#\rThe output strokes inherit the point attributes of the input strokes, including radius, strength, depth and vertex color. However, if the input strokes have different stroke attributes, e.g., the fill color and the assigned material, the output strokes can only choose one of them to inherit. There is an option to specify the criterion for such inheritance.\nCases of 3 or More Shapes\r#\rThe expected result of two input strokes is straightforward. However, with three or more input strokes, there may be multiple ways to finish the operation.\nThe figure above is an example of performing the Difference operation on 3 shapes. The numbers of Subjects and Clips need to be specified in the options.\nAlso, the sequence of stroke selection matters. The first selected strokes are regarded as Subjects, and the last selected strokes are Clips.\nDraw Mode Operators\r#\rThe boolean operators are also available in the Draw mode. In this mode, it will take the lastest drawn stroke as the Clip, and perform the operation on each stroke overlapping with it in the same layer.\nThere is an option to use the line radius as the Clip path. This resembles the experience of the erasor tool in raster painting software, as shown in the figure above.\r"},{"id":2,"href":"/nijigp/docs/functionality/io/brushes/","title":"Brush Import","section":"- Import/Export -","content":"\rBrush Import\r#\rThe ABR/GBR Brushes button is an operator that converts .abr and .gbr brush files, which are widely used in software including Adobe Photoshop, GIMP and Krita, into Grease Pencil materials/brushes.\nIt may take a long time to parse high resolution (e.g. 2500px * 2500px) brushes, because the brush images need to be uncompressed. The time further increases if the file contains multiple brushes.\nIf you want to use the high resolution brushes repeatedly, you may consider save the brushes in a .blend file and link/append from it in the future, which may be faster than importing the brushes all over again.\nTemplate Brush\r#\rSince the .abr and .gbr brushes are designed for raster graphics and work in a different way from Grease Pencil, this add-on in fact only extracts the images from the brush file and use them as textures of new materials/brushes. All the original brush parameters will not be preserved.\nYou can select an existing Grease Pencil brush as a template in the import options. All newly generated brushes will use the parameters of this brush.\nColor Modes\r#\rExcept some RGB .gbr brushes (which are not very common), a brush usually has only a single color channel as the texture. You can choose to use this channel as either alpha/transparency or the grayscale color in the import options.\nWhen using the channel as alpha, you can specify black or white as the texture color.\nSave Brush Icons\r#\rDespite the brush textures saved in the .blend file, the brush thumbnails shown in the Tool panel are separate image files, and have to be saved outside the .blend file.\nThere is an option specifying where to save these files. Deleting them will stop the brush from showing its thumbnail. However, the brush itself will not be impacted.\n(The example brushes shown in this page is from the SeerStuff set created by SeerLight.)\n"},{"id":3,"href":"/nijigp/docs/functionality/animation/frame_animation/","title":"Frame Animations","section":"- Animations -","content":"\rFrame Animations\r#\rMultiframe Operations\r#\rGrease Pencil has a Multiframe Tool allowing users to draw or edit on multiple frames at the same time. Some of NijiGPen\u0026rsquo;s operators in the Edit mode support this feature. With the Multiframe tool enabled, they are performed on all selected frames, instead of the active frame.\nIn addition, new options will appear in the multiframe mode for some operators, which are designed for making animated effects, including:\nFalloff option of the polygon Offset and Sweep operators. Stop-Motion Animation option of the mesh generation operators. Baking Rigging to Keyframes\r#\rThe Bake Rigging to Keyframes button in the Weight Paint mode will disable the armature deformation and convert the bone animations to keyframe animations instead. This will allow users to further modify each frame\u0026rsquo;s strokes.\nCurrently, this operator is implemented in an inefficient way. Therefore, it may take a long time if the number of strokes or frames is large.\r"},{"id":4,"href":"/nijigp/docs/get_started/installation/","title":"Installation","section":"Get Started","content":"\rInstallation\r#\rDifferent from most Blender add-ons, NijiGPen relies heavily on third-party Python packages. It is recommended to read the Python Packages page for more details.\nRequirements\r#\rBlender 3.3 ~ 3.6 (Currently, the add-on focuses majorly on stable verions. It is not guaranteed that all functions can work well in alpha or beta verions of Blender.)\nInstallation Steps\r#\rDownload the archive file from the GitHub Release page. Please avoid downloading the source code ZIP directly, since it may contain untested changes.\nIn Blender, open [Edit]-\u0026gt;[Preferences]-\u0026gt;[Add-ons] and click the Install button to load the archive. Enable the installed add-on.\nCheck the dependency summary to decide which Python packages are needed. Install them in the Preferences panel. Internet connection is required. Upgrade\r#\rBlender Upgrade: After upgrading Blender to a new version, the Installation Step 3 (Dependency Management) should be executed again.\nAdd-on Upgrade: If you want to replace the installed add-on with a newer version, it is recommended to remove the old version and restart Blender before installing the new version.\nRemoval\r#\rRemoving the add-on will not automatically remove the Python packages it installed. Please manually remove them using the buttons in the Preferences panel before removing the add-on itself.\n"},{"id":5,"href":"/nijigp/docs/functionality/mesh/generation/","title":"Mesh Generation","section":"- Meshes -","content":"\rMesh Generation\r#\rNijiGPen allows users to convert a Grease Pencil stroke to a mesh object (either planar or 3D). This can have multiple usages, such as:\nAdding the 3D shading effect to a 2D painting. Quick modeling from sketches. A stroke will be treated as a closed shape during mesh generation. Therefore, the line-only strokes may look different after the generation. You may either ignore them in the options or convert them to outlines first.\rPre-Processing\r#\rSampling the stroke with equal point intervals and/or smoothing the stroke may improve the quality of generated mesh. Therefore, shortcuts of some Blender native operators are placed here. Please refer to another page for more information.\rOffset Method (Frustum)\r#\rThe Frustum button provides a relatively simple way of converting each selected stroke to a mesh. It can be regarded as a 3D extension of the 2D Offset method.\nShape Style\r#\rThis method performs 2D insetting on each selected stroke for multiple times and extrudes each output path along the depth axis to make a 3D mesh. The user can determine the count and amount of 2D insetting to perform, as well as the style to generate depth.\nPost-Processing\r#\rThe 2D offset/inset operation may result in output vertices very close to each other, which may incur shading glitches. Options are provided to improve the topology of the output meshes, including vertex merging and remeshing.\nNormal Interpolation Method\r#\rThe Interpolation button is a more advanced mesh generation operator with more options to tune the output geometry.\nMesh Style\r#\rFirst, the algorithm will generate new vertices inside the stroke contour. Two styles are available:\nTriangulation: This style divides the shape into triangles. Furthermore, the user can choose to use either the triangle library or Blender\u0026rsquo;s native method to achieve this. The triangle library generates better-quality mesh with each face having a similar area. However, it is not available for Apple silicon devices. This method will generate denser vertices near the contour to make the shading looks better. Grid: Based on Knife Project with a grid mesh, this style ensures each face to be a square. However, the faces close to the boundary may be 5-gons. Normal/Height Calculation\r#\rSecondly, the algorithm determines the height/depth of each new vertex. By default, a normal map will be generated according to the contour shape. In this way, though the generated mesh is a 2D planar, it has a 3D shading look reacting to different light sources in the space.\nThe user can also choose to generate a real 3D structure by changing the Mesh Type option. Two methods are available converting normal vectors to heights. The Advanced Solver option tends to generate smoother transition of heights. It may has better results than the basic method when the contour contains some sharp angles, but also requires longer processing time.\nThe Max Vertical Angle and Vertical Scale options determine the maximum depth of the generated mesh. With a negative value of either option, a concave geometry will be generated instead of a convex one.\nOpen Areas\r#\rBy default, all boundary vertices, which are the original points of the input stroke, have zero depth. By assigning a weight group in the Open Area Group option, points with non-zero weights are no longer pinned to the working plane and will leave some openings on the boundary. The option Fading Out can make such vertices transparent.\nThe user can also make holes inside a mesh. Input strokes with a holdout fill material are regarded as holes. Please refer to the following instructions.\nColor and Material\r#\rVertex Colors\r#\rThe vertex color of the generated mesh is determined by the fill color of the input stroke. Currently, only the Solid fill is supported. Gradient or Texture fill is not supported yet.\nThe normal interpolation method can also use the line color instead. If line points have more than one vertex colors, the color vector will be interpolated for the inner vertices just as the normal vector.\nPresets\r#\rThe add-on provides with some preset materials which can be selected from a list during the generation. The available options may vary depending on:\nThe mesh type: planar or 3D The render engine: Eevee or Cycles Custom Materials\r#\rBesides the presets, the user can also assign other materials to the generated meshes. Most Blender materials are expected to be compatible. The geometry information is stored in the following attributes:\nColor for both generation methods. NormalMap, Depth, UVMap for the normal interpolation method. "},{"id":6,"href":"/nijigp/docs/get_started/installation/dependency/","title":"Python Packages","section":"Installation","content":"\rPython Packages\r#\rNijiGPen\u0026rsquo;s functionality relies on some third-party Python packages, which have to be separately downloaded and installed. If you have no experience with Blender add-ons that have similar requirements, it is strongly suggested to read this page before using the add-on.\nDependency Summary\r#\rThe table below lists the packages required for each type of operation. Lacking a package will not affect operations that do not require it. For example, if you install this add-on just to import brushes and render PSD files, then you do not need to take any actions mentioned in this page.\nFunction PyClipper Scipy \u0026amp; SkImage Triangle Polygon (Bool, Offset \u0026amp; Sweep) Yes Line Fitting Yes Line Shaping (Pinch, Taper) Smart Fill Yes Yes Mesh Generation [See Below] Yes Optional Optional Rigging Using Mesh Rigging Using Hints Yes Brush Import Line Art Import Yes Color Image Import Yes Yes SVG \u0026amp; Palette Paste PSD Render About Mesh Generation\nOnly pyclipper is a mandatory requirement. However, the other packages are optional to enable some enhancements of the Interpolation operator:\nscipy enables an advanced solver to calculate vertex depth. triangle enables an option to improve mesh quality, i.e., more uniformly distributed vertices. Impact of Operating Systems\r#\rThe add-on is available and has been tested in Windows, Linux and MacOS. However, there may be some specific issues in each OS:\nWindows\rDepending on the way Blender is installed, some additional attentions may be needed besides the normal package installation process.\nPortable or Steam: No additional action required. Official Installer: If Blender is installed in a system folder (e.g., C:\\Program Files\\Blender Foundation\\), it is recommended to run Blender as administrator to ensure the dependencies installed correctly. Microsoft Store: A custom package path is required to install packages. Normally, this will be handled automatically. Please refer to a later section for more information. MacOS\rThe triangle package is not yet available for Apple silicon (M1/M2) devices. Please skip installing this package. It has only minor negative effects.\rPackage Installation\r#\rTo install Python packages, the most straightforward way is the dependency manager in the add-on setting of the Preferences panel.\nClick the \u0026ldquo;Check\u0026rdquo; button to detect which packages have been installed, and click \u0026ldquo;Install\u0026rdquo; button for those missing (Internet connection is required).\nThe logs during the installation will be printed in the panel, which will also indicate if the installation is successful. The \u0026ldquo;Remove\u0026rdquo; button works in the similar way to uninstall packages. However, it requires Blender to be restarted to apply the changes.\nIf the installation fails, the reason may be shown in the logs. You may also consider reading the following sections about the alternative methods and the FAQ.\nAlternative Method 1: Custom Package Path\r#\rNormally, packages are installed in Blender\u0026rsquo;s directory. However, in the Custom Package Path option, an additional path can be assigned for Blender to find and load the packages from. This option may be useful in the following scenarios:\nYou have multiple instances of Blender and/or Python installed, and do not want to download the packages repeatedly. You do not have the write access to the Blender directory (e.g., when Blender is installed through Microsoft Store). In the second case, the add-on will try to find this path automatically during the package installation. If that does not succeed, you may consider checking the following paths, which are some common places that packages may be installed to:\n\u0026#34;[Your Blender Directory]/3.x/python/lib/site-packages\u0026#34; (Windows) \u0026#34;%USERPROFILE%\\AppData\\Roaming\\Python\\Python310\\site-packages\u0026#34; (Linux) \u0026#34;~/.local/lib/python3.10/site-packages\u0026#34; Alternative Method 2: Manual Installation\r#\rThe Python packages are installed and managed by pip. For Python users knowing how pip works, the required packages can also be installed manually using the commmand line or terminal:\nEnter Blender\u0026rsquo;s directory in the command line. An official manual is available. Enable the pip module: ./python -m ensurepip --upgrade Install packages: ./python -m pip install pyclipper triangle scikit-image You may consider these options when using pip: --no-cache-dir, --force-reinstall, --only-binary.\rFAQ\r#\rThe package installation succeeded, but the package status is still \u0026ldquo;Not Installed\u0026rdquo;.\rThis usually happens when you do not have the write access of the Blender directory, and the packages are automatically installed somewhere else. The path is usually shown in the logs. Please check if there are some lines containing a path ending with site-packages. If such a path can be found in the logs, refer to the Custom Package Path method and enter this path.\rBlender stops responding after hitting the Install button.\rIt is common that the download and installation may take some time. However, if Blender has no reponse for a long time, there might be network issues. Please make sure you have the Internet connection, and maybe use VPN if necessary.\nIt is possible that the display of logs can be lagged, until the operation finishes. To see the logs in real time, the same messages will also be shown in [Window] - [Toggle System Console] and without lags.\n"},{"id":7,"href":"/nijigp/docs/tips/scene_setup/","title":"Scene Setup","section":"Tips","content":"\rScene Setup\r#\rBlender comes with a template start file \u0026ldquo;2D Animation\u0026rdquo; that is convenient for painting. However, there are also some tricky parts in setting up the scene, especially when we put Grease Pencil and 3D objects in the same scene, including the meshes generated by this add-on. Here are some tips written in the form of FAQ.\nWhy cannot I see any shading effect when I generate meshes from Grease Pencil?\rThe default 2D Animation scene does not have any light sources. So we have to add some light objects to the scene ourselves.\nIn addition, please change the Viewport Shading to Render Preview mode and make sure that the scene lights are enabled.\nIf you do not want to set light sources, you can try the MatCap materials when generating meshes, which have the lighting information baked in and do not need scene lights.\nWhy is the lighting on 2D and 3D objects not consistent?\rThe environment background colors for 2D and 3D objects are not the same. In the [Scene]\u0026gt;[World] panel:\nthe lighting of 3D objects is determined by Surface and Volume tabs, but the lighting of Grease Pencil is determined by the Viewport Display tab. Please make sure that these two color values are the same if you want to make the lighting more consistent across all objects.\nWhy is the color drawn on the canvas slightly different from my material setting?\rYou may notice that the color displayed in the viewport is slightly different from the color you selected in the Brush or Material settings. This can cause some problems, such as getting the wrong color when using the Eyedropper tool.\nThis happens because the default background color is not actually white, although it looks very similar. The exact color is #F9F9F9.\nTo keep the color as it is, you can either set the viewport background color to pure white or uncheck the \u0026ldquo;Use Lights\u0026rdquo; option of the Grease layer.\nWhy does Grease Pencil obstruct all 3D objects regardless of depth, unlike what I see in the preview?\rThere are two options determining whether Grease Pencil will be rendered above all 3D objects:\nIn the [Scene]\u0026gt;[ViewLayer] panel, when Z pass is disabled (as by default), Grease Pencil objects will be rendered above all 3D objects. (But in the preview, it appears at the correct location.) In the [Object] properties panel, when \u0026ldquo;In Front\u0026rdquo; is checked in the Viewport Display tab, this Grease Pencil object is both rendered and previewed at the top. "},{"id":8,"href":"/nijigp/docs/functionality/line/fit/","title":"Sketch Cleanup","section":"- Lines -","content":"\rSketch Cleanup\r#\rNijiGPen\u0026rsquo;s line operators provide functionality that helps turn raw sketches into final line art. A raw sketch usually contains repeated strokes, line splits, and line gaps that require a lot of manual effort to clean up. The Line Fit operators can speed up this process by merging multiple strokes into a single, smooth stroke.\nFit Sketch to Single Line\r#\rThe major way of using this function is from the sidebar panel in the Edit mode. The Single-Line button turns all selected strokes in the active frame to one new stroke.\rThe process of merging multiple strokes is automatic. However, in order to get a smooth output, there are two options to configure:\nLine Spacing determines a range, within which the lines drawn in parallel will be smoothed. Smoothness uses either Bézier or resampling method to make the output stroke smoother. Basically, they control the smooth level in two orthogonal directions, which is indicated in the following figure:\nInherit Point Attributes\r#\rBy default, the radius of the output stroke points is determined by whether the sketches are densely or sparsely drawn. The point strength/opacity will be set to 1. However, the user can also choose to use the strength/radius value from the input strokes.\nVertex color and line UV can also be inherited from input to output.\nFit Sketch to Multiple Lines\r#\rSometimes the sketch is complex, and the user may want to convert it to multiple lines instead of a single one. The Multi-Line button will attempt to categorize the input strokes into clusters, and perform the line fit for each cluster separately.\nThe algorithm measures the distance between each pair of input strokes in a pointwise manner to determine which strokes belong to the same cluster.\nThe number of clusters is important, as shown in the figure above. There are several options to tune this value:\nBy Absolute Distance: Specifying a length as the maximum distance between strokes in the same cluster. By Relative Distance: Using a ratio of the stroke length as the maximum distance. By Number: Setting the maximum amount of clusters. Cluster Select\r#\rThe Cluster Select button applies the same criterion to find similar strokes (i.e., having a small pointwise distance) with the selected ones. However, it enlarges the selection instead of fitting the strokes. This operator can be used to select strokes which may belong to the same part of the drawing.\nFit Sketch in Draw Mode\r#\rThe Line Fit function can also be used in the Draw mode. In this mode, the user should assign the layer containing the sketch as the Reference Layer, and then draw the line art in a new layer. The operator will refine and smooth the latest drawn stroke according to the sketch.\n"},{"id":9,"href":"/nijigp/docs/functionality/line/","title":"- Lines -","section":"Functionality","content":""},{"id":10,"href":"/nijigp/docs/get_started/basic_usage/","title":"Basic Usage","section":"Get Started","content":"\rBasic Usage\r#\rUser Interface\r#\rNijiGPen creates new user interfaces to trigger its functions in the following places of Blender.\nSidebar Panels\r#\rA tab named NijiGP will appear in the sidebar of the 3D Viewport, if the active object is Grease Pencil and the mode is Draw, Edit or Weight Paint. This is the major way of calling NijiGPen\u0026rsquo;s functions.\nNijiGPen operators are categorized in several panels. Depending on the current mode, different panels or operators may appear.\nThese operators do not have default shortcut keys. However, an option [Assign Shortcut] is available in the operator button\u0026rsquo;s right-click menu.\nTools\r#\rNijiGPen adds several new tools in the Toolbar of Grease Pencil Edit mode. The tool icons have a \u0026ldquo;2D\u0026rdquo; mark on them.\nThese tools have the same effect as the corresponding operators in the sidebar panel. However, they allow you to tune the parameters with mouse dragging instead of typing numbers.\nViewport Buttons (Optional)\r#\rNijiGPen also adds some buttons at the bottom of the 3D Viewport window. They are shortcuts of the following functions:\nUndo/redo Tilt the canvas Arrange selected strokes forward/backward The purpose of these shortcut buttons is to enhance the user experience on touchscreens (e.g., Microsoft Surface), inspired by popular painting/design software on tablets. They can be triggered by either the mouse or a stylus.\nIf you do not need these buttons or find them conflicting with other add-ons, you can change their position or turn them off in the setting of Preferences panel.\r2D Working Plane\r#\rMost of the add-on operators work in a 2D plane. If you are working with Blender\u0026rsquo;s 2D Animation template (using X-Z plane by default), there would be no problems. However, when working in the 3D space (e.g., painting on the surface of an object), the way of determining the 2D working plane should be paid attention to.\nIn the default mode (\u0026ldquo;Auto\u0026rdquo;), the add-on first estimates the coordinates of all input stroke points to determine the vectors of two most important dimensions. Then it uses the current view to determine the front/back and up/down directions. Please avoid selecting strokes belonging to more than one 2D plane as the input. In that case, the estimation can be wrong. (A warning message will show up when it happens.) There are also other modes available, including using the current view, or using an orthogonal plane (X-Y, X-Z or Y-Z). It can be set in the Global Setting panel. Applying a rotation in a Grease Pencil layer\u0026rsquo;s attribute may disturb the detection of the working plane. If you want to use layer rotation with NijiGPen, please make sure to check the Use Transform of Active Layer option and process strokes from a single layer per operation.\nOn the other hand, applying a rotation on the object itself or its parent has no negative effect on the plane detection.\n"},{"id":11,"href":"/nijigp/docs/functionality/io/clipboard/","title":"Clipboard Utilities","section":"- Import/Export -","content":"\rClipboard Utilities\r#\rNijiGPen provides with the clipboard enhancement that allows users to paste specific types of data produced by other graphic editing software.\nPaste SVG Codes\r#\rIt is common for graphic design software to copy vector shapes as SVG code, including a small amount of painting software such as Clip Studio Paint. You can directly paste the shapes inside the current Grease Pencil object through NijiGPen.\nThe parsing of SVG codes is in the same way as the standard import function of Blender, except for an additional option to automatically detect holes in imported shapes and make them transparent.\nPaste Palettes\r#\rFor online services that share or generate color palettes, the color data can also be imported in Blender through the clipboard.\nOne supported format is XML, used by applications such as Adobe Color to store color data.\nSome other similar services just use an array of hex codes to represent colors. Hex codes separated by either space or any symbol can be recognized, such as:\n#FFEE93 #F5D782 #E97878 #9B5151 ffee93f5d782e978789b5151 f3c969,edff86,fff5b2,d4fcc3,362c28 [\u0026quot;f3c969\u0026quot;,\u0026quot;edff86\u0026quot;,\u0026quot;fff5b2\u0026quot;,\u0026quot;d4fcc3\u0026quot;,\u0026quot;362c28\u0026quot;] Tints and Shades\r#\rThis option generates multiple variants of each color imported, by changing the brightness of imported color.\n"},{"id":12,"href":"/nijigp/docs/get_started/","title":"Get Started","section":"Docs","content":""},{"id":13,"href":"/nijigp/docs/tips/limitations/","title":"Limitations","section":"Tips","content":"\rLimitations\r#\rThe add-on has a number of limitations in different aspects, including:\nUnfinished features of the add-on itself, which may be improved in future releases. Limitations due to Blender\u0026rsquo;s own design, which may lead to different behaviors from common graphics software. This page lists limitations which are general to multiple operators. Besides it, the constraints of 2D space can be found in Basic Usage. The limitation of each single operator will be recorded in their own page.\nShape of a Stroke\r#\rThe performance of the add-on may deteriorate with input strokes of certain shapes:\nPlease avoid using self-overlapping strokes. Unlike common vector formats such as SVG, Blender does not define a fill rule and the rendering of the overlapping parts cannot be guaranteed. Most operators ignore the overlapping parts automatically, but sometimes it also causes crashes. To eliminate these parts, you can use the Offset operator with a value of zero. It is also recommended not to have too few points or unevenly distributed points along the stroke, as this can lead to poor quality mesh generation or line cleanup results. The Resample button in the add-on panel can be used to quickly redistribute the stroke points. Holes\r#\rBoth this add-on and Blender itself have limitations supporting fill shapes will holes inside.\nBlender does not allow holes in a stroke, but some add-on operators like Boolean, Offset and SVG Paste can result in holes. In such cases, the corresponding geometry will be created, but will not be transparent. To display holes in Grease Pencil, Blender provides with a Holdout property in its material setting. The add-on also has a Hole Holdout operator to automatically set this property for shapes inside other shapes. In addition, some operators of the add-on have special behaviors when the input strokes have the holdout property. The Mesh Generation operator (currently only for the interpolation method) can turn these strokes into real holes in the mesh. The Offset and Sweep operators have the option to inverse the operation direction for these strokes. Vertex Groups\r#\rAfter some operators, including Boolean, Offset, and Line Cleanup, the weights of vertex groups are not preserved. If you need them for modifiers or rigging (including the rigging functions of this add-on), it is recommended to assign weights after using these operators. (All emojis in this page are designed by OpenMoji – the open-source emoji and icon project. License: CC BY-SA 4.0)\n"},{"id":14,"href":"/nijigp/docs/functionality/mesh/management/","title":"Mesh Management","section":"- Meshes -","content":"\rMesh Management\r#\rDuring the mesh generation, since each stroke will be converted to a separate mesh object, it is common to have many objects generated from the same Grease Pencil painting. This page will discuss the methods and options to handle multiple generated objects.\nMulti-Object Alignment\r#\rThis section exists in each mesh generation operator\u0026rsquo;s option panel, defining how multiple generated meshes are aligned in the depth dimension.\nWith the Stack option enabled, objects will be sorted according to the sequence of the input strokes. The objects generated from upward strokes will be moved forward along the depth axis, so that they will not be sheltered by the ones generated from downward strokes.\nFor planar meshes with normal maps, a constant gap in the depth axis can be set between each generated object.\nFor 3D meshes, Overlap Tolerance determines the maximum portion of vertices which may be overlapped by downward objects. O% means no overlapping is allowed, just as the planar mesh case. 100% means allowing all overlapping which leads to no depth movement at all.\nBatch Operations\r#\rIn the sidebar panel, there are buttons to perform batch operations on all generated meshes of the active Grease Pencil object. The user can hide, show or delete all mesh objects at once.\nAnimation\r#\rMultiframe operations may also generate multiple mesh objects, since the strokes in each different frame are regarded independent. To avoid the objects from different keyframes interfering with each other, the Stop-Motion Animation option can attach a predefined Geometry Nodes group to the generated object, which automatically hides the object outside its keyframe range.\n"},{"id":15,"href":"/nijigp/docs/functionality/polygon/offset/","title":"Offset","section":"- Polygons -","content":"\rOffset\r#\rThe 2D Offset operation is performed on the path of a stroke to achieve inflating/deflating/beveling of the shape.\nAlthough Blender has some inset/bevel operators/modifiers, they are not available for Grease Pencil. Besides, compared with Blender\u0026rsquo;s method, this add-on will not cause the self-intersection of the output shape.\nThese functions are realized by calling the Clipper library. Please check the link for more details.\nFrom Sidebar Panel\r#\rThe Offset button in the sidebar panel will offset each selected stroke with a given length value. A negative length value indicates insetting.\nShape Style\r#\rThere are 3 offset modes to select from:\nFill Mode: Inflat or deflat the shape towards the normal direction of each line segment. Line Mode: Inflat the outline of the stroke. Please notice that: A negative offset amount is meaningless in this mode. From Blender 3.4, there is an official operator Outline achieving a similar effect. Corner Mode: This mode is a combination of two Fill Mode offset operations in the opposite direction (e.g., an offset followed by an inset immediately). As a result, most points in the stroke are unchanged, but the corners will be \u0026ldquo;eroded\u0026rdquo;. This can achieve an effect of bevel. The corners of the output shape can also have different styles, including Rounded, Flat and Miter.\nColor Tint\r#\rA new vertex color can be assigned to the output strokes. With a tint color and the Keep Original option on, repeating the operator for multiple times can create a gradient coloring effect.\nFrom Toolbar\r#\rOffset operations can also be performed from the toolbar as a tool named 2D Offset. Instead of typing a length value, the offset amount is controlled by mouse dragging.\nThe offset mode can be switched by holding different keys:\nDefault: Fill Mode Ctrl: Corner Mode (Bevel) Shift: Line Mode "},{"id":16,"href":"/nijigp/docs/functionality/animation/rigging/","title":"Rigging Utilities","section":"- Animations -","content":"\rRigging Utilities\r#\rAlthough Blender can automatically generate weights rigging Grease Pencil strokes to an armature, the result often requires heavy manual adjustment. NijiGPen provides with several alternative methods generating bone weights.\nThe rigging-related operations will show up in a panel when the current mode is Weight Paint.\nTransfer Weights from Meshes\r#\rThe Weight From Meshes button is a tool transferring the weights from rigged mesh objects to the current Grease Pencil object.\nThe operator requires an armature and one or more source mesh objects as the input. It sets the weights of the armature bones to stroke points according to the nearest vertex from the source mesh objects.\nIf the source objects are not rigged, the operator can rig them first using the With Automatic Weights parenting tool, and then perform the transfer, controlled by the option Use Existing Weights.\nSource Objects\r#\rFor 2D animations, one recommended way is to draw a silhouette of the target that you want to animate, and convert it to a mesh object using this add-on\u0026rsquo;s mesh generation operations. The silhouette does not need to be very precise, but in general a better-drawn silhouette may lead to a better rigging result.\nBesides manually drawing it, the following functions may be used to generate a silhouette:\nBlender\u0026rsquo;s Fill tool with the inverted direction. Smart Fill tool of this add-on. Besides using the generated mesh, you can also assign an arbitrary mesh object, or all mesh objects from a collection as the source. For example, this option may be useful when drawing strokes on the surface of a 3D object to keep their bone animation consistent. In that case, please make sure to change to mapping option to 3D Nearest Vertex.\nUse Hints to Generate Pins\r#\rThe Pins from Hints button is another rigging tool that can be used for rubber hose animations of limbs. It does not require an existing armature as the input. Instead, by drawing some hint strokes, the operator will generate bones at the same position, and then rig the Grease Pencil using these bones by setting weights to nearby points.\nIt is recommended to add a Smooth modifier after the Armature modifier if the point movement looks unnatural.\rHint Strokes\r#\rThe hint strokes should be drawn in a separate layer. Each stroke\u0026rsquo;s start and end position determine the placement of a bone. All other point/stroke attributes have no impact on the result.\nEach hint stroke should be drawn at the middle of a limb and perpendicular to it. It should intersect with the limb\u0026rsquo;s outlines at both ends.\nBone Styles\r#\rThere are several options to transform the generated bones:\nBone Style: This determines whether the bone should start from the hint\u0026rsquo;s center (Half) or start point (Full). Bone Rotation: Setting it to +90 or -90 degrees can make the bones parallel to the limb. Set Bone Parent: This option sets the parent relationship between bones according to the drawn sequence of hints and the relative position. Please notice that the result usually need manual adjustment. "},{"id":17,"href":"/nijigp/docs/functionality/line/tuning/","title":"Stroke Tuning","section":"- Lines -","content":"\rStroke Tuning\r#\rThis group of operators is designed to perform some fine adjustments on the position and/or thickness of a line art.\nPinch\r#\rThis operator closes the gaps between each pair of selected strokes if any of their tips are close together. The user can set a Transition value to determine whether to move the whole stroke or just move the tips.\nThe operation does not apply for the case where 3 or more strokes have their tips in proximity. In that case, only two of them will be merged.\rBy enabling the Consider Intermediate Points option, this operator can also be used to process the case where a tip of one stroke is close to the middle part of another stroke. The line points in the contact region can be thickened, in order to emulate an effect of contact shadow.\nTaper\r#\rThis operator changes the thickness of each selected stroke to make it look more natural, for example, to emulate the pressure sensitivity without having the corresponding input device.\nIt changes the radius of points at:\nStarting/End Points: The user can decide the impact range. Turning Points: The radius will be changed according to the point curvature. By default, these points will be thickened, but the user can also choose to thin them. "},{"id":18,"href":"/nijigp/docs/functionality/mesh/","title":"- Meshes -","section":"Functionality","content":""},{"id":19,"href":"/nijigp/docs/functionality/","title":"Functionality","section":"Docs","content":""},{"id":20,"href":"/nijigp/docs/functionality/line/smart_fill/","title":"Smart Fill","section":"- Lines -","content":"\rSmart Fill\r#\rSmart Fill is an operator in the Draw mode. It fills an entire line art layer based on some color hints marked by the user. Compared with the Blender\u0026rsquo;s default Fill tool, it has the following advantages:\nIt handles the gaps in the line art automatically. It is less likely to leave seams near the contour, or be intersected. Although the algorithms are different, the concept of this operation is similar to the Colorize Mask tool in Krita.\nInput/Output Layers\r#\rThe operation takes two input layers, one containing the line art (Line Layer), and the other containing the color hint strokes (Hint Layer). They must be distinct layers.\nThe operation then generates new strokes in an output layer (Fill Layer). It is possible, but not recommended to use the same layer as Fill and Hint, since it will be difficult to distinguish the output strokes from the input ones. To overcome it, there is an option specifying to use only Boundary Strokes as hints.\nHint Strokes\r#\rPoints in the hint strokes will force the nearby areas be filled with the same color. The color of a hint point is determined in the following way:\nIf the stroke/point has a vertex color, use it as hint. Otherwise, use its material color. If the stroke has its fill visible, use the fill color as hint. Otherwise, use the line color. Only the position and color of the hint strokes have an impact. Other point/stroke attributes, including the line thickness and strength will not affect the result.\nYou can use fill materials for the hint strokes. But only its contour points will be taken into account. The inner part has no effect.\rOutput Materials\r#\rThere are different ways to assign materials to the newly generated fill strokes:\nUse the same materials (and vertex colors if exist) as hint strokes. Use an existing material. Generate vertex fill colors for each stroke. For each color used as hints, generate a new material. If you tend to use existing materials, please make sure they are not line-only ones.\n(The example image used in this page is Portrait of Olga by Pablo Picasso in 1920.)\n"},{"id":21,"href":"/nijigp/docs/functionality/polygon/sweep/","title":"Sweep","section":"- Polygons -","content":"\rSweep\r#\rThe Sweep operation drags stroke polygons along a given vector or path to create several effects, such as the pseudo-3D extrusion and shadowing.\nThe mathematical terminology behind this concept is Minkowski sum.\nFrom Sidebar Panel\r#\rThe Sweep button in the sidebar panel performs the operation on each selected stroke by typing the lengths of a 2D vector.\nShape Style\r#\rThe following 3 styles apply:\nExtrude: It turns the shapes into a pseudo-3D look. Outer Shadow: It is similar to the Extrude style but the output only contains the newly generated paths. Inner Shadow: It generates a rim inside the input stroke shape. If you need to turn strokes into real 3D objects instead of pseudo-3D ones, you may consider Mesh Generation operators instead.\rCurved Path\r#\rThe sweep path is not constrained to a straight line. By changing the Path Type option, the last selected stroke can be used as the path. The path itself will not be processed. Therefore, please select at least two strokes in this mode.\rProcess Holdout\r#\rSince material holdout is used to represent holes in a shape, it would look incorrect when sweeping it together with other shapes. Therefore, the following special rules can be applied:\nFor Extrude and Outer Shadow style, execute Inner Shadow for holes instead. If the holdout material is generated by this add-on\u0026rsquo;s Hole Holdout operation, the material will be changed back to the non-holdout one. For Inner Shadow style, the holes are excluded from the input and ignored. Color Tint\r#\rA new vertex color can be assigned to the output strokes. With a tint color and the Keep Original option on, repeating the operator for multiple times can create a gradient coloring effect.\nFrom Toolbar\r#\rSweep operations can also be performed from the toolbar as a tool named 2D Sweep. Instead of typing numbers, the path vector is controlled by mouse dragging.\nThe style can be switched by holding different keys:\nDefault: Extrude Ctrl: Outer Shadow Shift: Inner Shadow "},{"id":22,"href":"/nijigp/docs/tips/","title":"Tips","section":"Docs","content":""},{"id":23,"href":"/nijigp/docs/functionality/io/vectorizing_images/","title":"Vectorizing Images","section":"- Import/Export -","content":"\rVectorizing Images\r#\rThe Trace Image to Grease Pencil tool of Blender is limited to black and white input images. NijiGPen provides with operators vectorizing another two types of raster images.\nThese operators take either a single image or an image sequence as the input, and generate new strokes in the current Grease Pencil layer. The direction of the generated strokes is parallel to the current 2D working plane.\nSketches: Extracting the Line Art\r#\rThe Line Art button is an operator to convert an image to line-only strokes. It is recommended to select a material without fills enabled.\nCompared with most SVG-based editing software, an advantage of extracting the line art in Blender is the ability to preserve the thickness and color of the strokes, stored as point attributes.\nMedian Filter\r#\rSetting a non-zero value in the Median Filter Radius option will enable the median filter.\nThe filter should be used when the input image has heavy noise or grain. However, a large radius may also lower the processing speed and ignore some details from the image. Color Images: Quantization\r#\rThe Flat Color button is an operator that reduces the number of distinct colors used in an image. Then, each color of the image is traced separately to generate Grease Pencil strokes.\nYou can choose to either generate a new material for each color, or use a single material with multiple vertex fill colors.\nThis operator aims at color paintings in the flat style, rather than images with rich and gradient colors, e.g., real-world photos.\nIncreasing the number of colors in the import option may lead to better results for the latter case, but also causes a much longer processing time, and the result may still be far from ideal.\nGenerate Line Colors\r#\rThis method mainly focuses on the fill color of generated strokes, while there is also an option to determine whether the same color should be assigned to the line points.\nThe thickness and strength of the line are determined by the current brush.\nGenerate a Palette\r#\rAlong with the stroke generation, a palette can be generated which contains the colors extracted from the image. On the other hand, a palette can also be used as the input of the Color Source option, specifying which colors should be extracted. This may have the following use cases:\nTo import multiple images and guarantee their color sets are consistent. To perform the color transfer, i.e., applying the color style of one image to another image. Min Stroke Length\r#\rTo clarify, this option actually determines whether to ignore a shape by its area. For example, with this option setting to 16px, traced shapes with an area less than 256px^2 will not be converted to a stroke.\nShapes with 0 or a very small area may lead to problems when performing polygon or mesh generation operations. This option can filter them out.\n(The example images used in this page are Portrait of Olga by Pablo Picasso in 1920, and The Starry Night by Vincent van Gogh in 1889.)\n"},{"id":24,"href":"/nijigp/docs/functionality/animation/","title":"- Animations -","section":"Functionality","content":""},{"id":25,"href":"/nijigp/docs/developer_notes/","title":"Developer Notes (TODO)","section":"Docs","content":""},{"id":26,"href":"/nijigp/docs/functionality/polygon/holdout/","title":"Hole Holdout","section":"- Polygons -","content":"\rHole Holdout\r#\rTo display holes inside a shape\u0026rsquo;s fill, Blender has a unique mechanism in Grease Pencil that is different from most vector graphic editing software. Users need to manually enable a Holdout option in the material setting to make a stroke transparent.\nTo simplify this process, NijiGPen provides with an operator to automatically detect holes among selected strokes. If a stroke\u0026rsquo;s path is completely inside another stroke\u0026rsquo;s fill:\nIt will be arranged upward to display in front of the stroke it is in. It will be turned transparent by assigning a material with all attributes unchanged except the Holdout option being enabled. If such material does not exist, a new material will be created first. Interaction with Other Operators\r#\rThis operation is also executed automatically as a step in many other operators, including SVG Paste, Color Image Vectorization, Smart Fill and Mesh Generation.\nPlease also refer to the Limitation page for more information about processing holes.\n"},{"id":27,"href":"/nijigp/docs/functionality/io/psd_render/","title":"PSD Render","section":"- Import/Export -","content":"\rPSD Render\r#\rThe Multi-Layer PSD Render button renders each layer of the Grease Pencil object to a separate image, and then merge them together to a .psd file. The name, blend mode of each layer and the sequence of layers will be preserved. In this way, the image can be further edited in various popular image editing or painting software.\nBesides the Grease Pencil layers, there are two additional PSD layers rendered. One contains all non-Grease-Pencil objects, and the other is the scene background.\nCompatibility\r#\rDespite its popularity, the .psd file format is designed for internal use within Adobe software, but not for interchange. Given this and the difference between vector, raster and 3D graphics, only a limited subset of features is supported.\nDuring rendering, the following restrictions apply:\nLayer masks are not supported, because Photoshop has different mechanisms for representing masks. Z-ordering in 3D space may not be preserved in the rendered image. Compression algorithms are not implemented yet. Rendered file size may be large. Saving the image again in another software will likely to reduce the image size to normal. Frame animations have not been supported yet. "},{"id":28,"href":"/nijigp/docs/functionality/io/","title":"- Import/Export -","section":"Functionality","content":""},{"id":29,"href":"/nijigp/docs/","title":"Docs","section":"Introduction","content":""}]